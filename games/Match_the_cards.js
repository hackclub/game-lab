/*
First time? Check out the tutorial game:
https://sprig.hackclub.com/gallery/getting_started

@title: Card Match
@author: 
@tags: []
@addedOn: 2024-00-00
*/


var cards_flipped = 0
var game_started = false
var total_flipped = 0

var cards_1_14 = 0
var cards_2_8 = 0
var cards_3_9 = 0
var cards_4_12 = 0
var cards_5_6 = 0
var cards_7_13 = 0
var cards_10_16 = 0
var cards_11_15 = 0

const flip_1 = "!"
const flip_14 = "@"
const flip_2 = "#"
const flip_8 = "$"
const flip_3 = "%"
const flip_9 = "^"
const flip_4 = "&"
const flip_12 = "*"
const flip_5 = "("
const flip_6 = ")"
const flip_7 = "1"
const flip_13 = "2"
const flip_10 = "3"
const flip_16 = "4"
const flip_11 = "5"
const flip_15 = "6"

const player = "p"
const card1 = "c"
const card2 = "d"
const card3 = "g"
const card4 = "h"
const card5 = "i"
const card6 = "j"
const card7 = "k"
const card8 = "l"
const card9 = "m"
const card10 = "n"
const card11 = "o"
const card12 = "q"
const card13 = "r"
const card14 = "s"
const card15 = "t"
const card16 = "u"
const edge = "e"

var prev_card = card1
var prev_flip = flip_1
var prev_match = cards_1_14

setLegend(
  [ player, bitmap`
DDDDDDDDDDDDDDDD
D..............D
D..............D
D..............D
D..............D
D..............D
D..............D
D..............D
D..............D
D..............D
D..............D
D..............D
D..............D
D..............D
D..............D
DDDDDDDDDDDDDDDD` ],
  [ card1, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card2, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card3, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card4, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card5, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card6, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card7, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card8, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card9, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card10, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card12, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card13, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card14, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card15, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ card16, bitmap `
................
................
................
...8888888888...
...8888888888...
...8888888888...
...8868888688...
...8868668688...
...8866666688...
...8866666688...
...8888888888...
...8888888888...
...8888888888...
................
................
................`],
  [ edge, bitmap `
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLL`],
  [ flip_1, bitmap `
................
................
................
...8888888888...
...8222222228...
...8222FF2228...
...822FFFF228...
...82FFLLFF28...
...82FFLLFF28...
...822FFFF228...
...8222FF2228...
...8222222228...
...8888888888...
................
................
................`],
  [ flip_14, bitmap `
................
................
................
...8888888888...
...8222222228...
...8222FF2228...
...822FFFF228...
...82FFLLFF28...
...82FFLLFF28...
...822FFFF228...
...8222FF2228...
...8222222228...
...8888888888...
................
................
................`],
  [ flip_2, bitmap `
................
................
................
...8888888888...
...8222222228...
...8252222528...
...8225225228...
...8222552228...
...8222552228...
...8225225228...
...8252222528...
...8222222228...
...8888888888...
................
................
................`],
  [ flip_8, bitmap `
................
................
................
...8888888888...
...8222222228...
...8252222528...
...8225225228...
...8222552228...
...8222552228...
...8225225228...
...8252222528...
...8222222228...
...8888888888...
................
................
................`],
  [ flip_3, bitmap `
................
................
................
...8888888888...
...8222222228...
...8222CC2228...
...82D2D22D28...
...82D22D2D28...
...822DD2D228...
...822D4DD228...
...8222DD2228...
...8222222228...
...8888888888...
................
................
................`],
  [ flip_9, bitmap `
................
................
................
...8888888888...
...8222222228...
...8222CC2228...
...82D2D22D28...
...82D22D2D28...
...822DD2D228...
...822D2DD228...
...8222DD2228...
...8222222228...
...8888888888...
................
................
................`],
  [ flip_4, bitmap `
................
................
................
...8888888888...
...8222222228...
...822H22H228...
...82H2HH2H28...
...82H2222H28...
...822H22H228...
...8222HH2228...
...8221111228...
...8222222228...
...8888888888...
................
................
................`],
  [ flip_12, bitmap `
................
................
................
...8888888888...
...8222222228...
...822H22H228...
...82H2HH2H28...
...82H2222H28...
...822H22H228...
...8222HH2228...
...8221111228...
...8222222228...
...8888888888...
................
................
................`],
  [flip_5, bitmap `
................
................
................
...8888888888...
...8222222228...
...8222992228...
...8222992228...
...8299999928...
...8299999928...
...8222992228...
...8222992228...
...8222222228...
...8888888888...
................
................
................`],
  [flip_6, bitmap `
................
................
................
...8888888888...
...8222222228...
...8222992228...
...8222992228...
...8299999928...
...8299999928...
...8222992228...
...8222992228...
...8222222228...
...8888888888...
................
................
................`],
  [flip_7, bitmap `
................
................
................
...8888888888...
...8222222228...
...8252FF2528...
...8225FF5228...
...82FFFFFF28...
...82FFFFFF28...
...8225FF5228...
...8252FF2528...
...8222222228...
...8888888888...
................
................
................`],
  [flip_13, bitmap `
................
................
................
...8888888888...
...8222222228...
...8252FF2528...
...8225FF5228...
...82FFFFFF28...
...82FFFFFF28...
...8225FF5228...
...8252FF2528...
...8222222228...
...8888888888...
................
................
................`],
  [flip_10, bitmap `
................
................
................
...8888888888...
...8222222228...
...8211111128...
...8211111128...
...8222112228...
...8222112228...
...8222112228...
...8222112228...
...8222222228...
...8888888888...
................
................
................`],
  [flip_16, bitmap `
................
................
................
...8888888888...
...8222222228...
...8211111128...
...8211111128...
...8222112228...
...8222112228...
...8222112228...
...8222112228...
...8222222228...
...8888888888...
................
................
................`],
  [flip_11, bitmap `
................
................
................
...8888888888...
...8222222228...
...8222222228...
...8222FF2228...
...822F22F228...
...82F2222F28...
...82FFFFFF28...
...8222222228...
...8222222228...
...8888888888...
................
................
................`],
  [flip_15, bitmap `
................
................
................
...8888888888...
...8222222228...
...8222222228...
...8222FF2228...
...822F22F228...
...82F2222F28...
...82FFFFFF28...
...8222222228...
...8222222228...
...8888888888...
................
................
................`])

setSolids([player, edge])

let level = 0
const levels = [
  map`
eeeeeeee
eecdghee
eeijklee
eemncqee
eerstuee
eeeeeeee`,
  map `
eeeeeeee
ee!#%*ee
ee((1#ee
ee%35*ee
ee1!36ee
eeeeeeee`
]


setMap(levels[level])

setPushables({
  [ player ]: []
})

onInput("w", () => {
  getFirst(player).y -= 1
})
onInput("a", () => {
  getFirst(player).x -= 1
})
onInput("s", () => {
  getFirst(player).y += 1
})
onInput("d", () => {
  getFirst(player).x += 1
})

onInput("i", () => {
  if (!game_started) {
    game_started = true
    addSprite(2, 1, player)
    clearText()
    addText("Press 'k' to flip", { 
    x: 2,
    y: 14,
    color: color`6`
    })
    }
})

onInput("k", () => {
  if ((getFirst(player).x == 2) & (getFirst(player).y == 1)){
    getFirst(card1).type = flip_1
    cards_1_14 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_1_14 < 2)) {
      cards_1_14 = 0
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_1).type = card1
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_1_14 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card1
      prev_flip = flip_1
      prev_match = cards_1_14
    }
  }
  if ((getFirst(player).x == 3) & (getFirst(player).y == 4)){
    getFirst(card14).type = flip_14
    cards_1_14 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_1_14 < 2)) {
      cards_1_14 = 0
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_14).type = card14
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_1_14 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card14
      prev_flip = flip_14
      prev_match = cards_1_14
    }
  }
  if ((getFirst(player).x == 3) & (getFirst(player).y == 1)){
    getFirst(card2).type = flip_2
    cards_2_8 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_2_8 < 2)) {
      cards_2_8 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_2).type = card2
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_2_8 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card2
      prev_flip = flip_2
      prev_match = cards_2_8
    }
  }
  if ((getFirst(player).x == 5) & (getFirst(player).y == 2)) {
    getFirst(card8).type = flip_8
    cards_2_8 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_2_8 < 2)) {
      cards_2_8 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_8).type = card8
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_2_8 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card8
      prev_flip = flip_8
      prev_match = cards_2_8
    }
  }
  if ((getFirst(player).x == 4) & (getFirst(player).y == 1)) {
    getFirst(card3).type = flip_3
    cards_3_9 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_3_9 < 2)) {
      cards_3_9 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_3).type = card3
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_3_9 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card3
      prev_flip = flip_3
      prev_match = cards_3_9
    }
  }
  if ((getFirst(player).x == 2) & (getFirst(player).y == 3)) {
    getFirst(card9).type = flip_9
    cards_3_9 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_3_9 < 2)) {
      cards_3_9 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_9).type = card9
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_3_9 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card9
      prev_flip = flip_9
      prev_match = cards_3_9
    }
  }
  if ((getFirst(player).x == 5) & (getFirst(player).y == 1)) {
    getFirst(card4).type = flip_4
    cards_4_12 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_4_12 < 2)) {
      cards_4_12 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_4).type = card4
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_4_12 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card4
      prev_flip = flip_4
      prev_match = cards_4_12
    }
  }
  if ((getFirst(player).x == 5) & (getFirst(player).y == 3)) {
    getFirst(card12).type = flip_12
    cards_4_12 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_4_12 < 2)) {
      cards_4_12 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_12).type = card12
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_4_12 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card12
      prev_flip = flip_12
      prev_match = cards_4_12
    }
  }
  if ((getFirst(player).x == 2) & (getFirst(player).y == 2)) {
    getFirst(card5).type = flip_5
    cards_5_6 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_5_6 < 2)) {
      cards_5_6 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_5).type = card5
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_5_6 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card5
      prev_flip = flip_5
      prev_match = cards_5_6
    }
  }
  if ((getFirst(player).x == 3) & (getFirst(player).y == 2)) {
    getFirst(card6).type = flip_6
    cards_5_6 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_5_6 < 2)) {
      cards_5_6 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_6).type = card6
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_5_6 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card6
      prev_flip = flip_6
      prev_match = cards_5_6
    }
  }
  if ((getFirst(player).x == 4) & (getFirst(player).y == 2)) {
    getFirst(card7).type = flip_7
    cards_7_13 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_7_13 < 2)) {
      cards_7_13 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_7).type = card7
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_7_13 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card7
      prev_flip = flip_7
      prev_match = cards_7_13
    }
  }
  if ((getFirst(player).x == 2) & (getFirst(player).y == 4)) {
    getFirst(card13).type = flip_13
    cards_7_13 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_7_13 < 2)) {
      cards_7_13 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_13).type = card13
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_7_13 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card13
      prev_flip = flip_13
      prev_match = cards_7_13
    }
  }
  if ((getFirst(player).x == 3) & (getFirst(player).y == 3)) {
    getFirst(card10).type = flip_10
    cards_10_16 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_10_16 < 2)) {
      cards_10_16 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_10).type = card10
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_10_16 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card10
      prev_flip = flip_10
      prev_match = cards_10_16
    }
  }
  if ((getFirst(player).x == 5) & (getFirst(player).y == 4)) {
    getFirst(card16).type = flip_16
    cards_10_16 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_10_16 < 2)) {
      cards_10_16 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_11_15) {cards_11_15 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_16).type = card16
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_10_16 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card16
      prev_flip = flip_16
      prev_match = cards_10_16
    }
  }
  if ((getFirst(player).x == 4) & (getFirst(player).y == 3)) {
    getFirst(card11).type = flip_11
    cards_11_15 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_11_15 < 2)) {
      cards_11_15 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_11).type = card11
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_11_15 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card11
      prev_flip = flip_11
      prev_match = cards_11_15
    }
  }
  if ((getFirst(player).x == 4) & (getFirst(player).y == 4)) {
    getFirst(card15).type = flip_15
    cards_11_15 += 1
    cards_flipped += 1
    if ((cards_flipped == 2) & (cards_11_15 < 2)) {
      cards_11_15 = 0
      if (prev_match == cards_1_14) {cards_1_14 = 0}
      if (prev_match == cards_2_8) {cards_2_8 = 0}
      if (prev_match == cards_3_9) {cards_3_9 = 0}
      if (prev_match == cards_4_12) {cards_4_12 = 0}
      if (prev_match == cards_5_6) {cards_5_6 = 0}
      if (prev_match == cards_7_13) {cards_7_13 = 0}
      if (prev_match == cards_10_16) {cards_10_16 = 0}
      setTimeout(() => {
        cards_flipped = 0
        getFirst(flip_15).type = card15
        getFirst(prev_flip).type = prev_card
      }, 1000)
    }
    if (cards_11_15 == 2) {
      total_flipped += 2
      cards_flipped = 0
    }
    if (cards_flipped == 1) {
      prev_card = card15
      prev_flip = flip_15
      prev_match = cards_11_15
    }
  }
  if (total_flipped == 16){
    clearText()
    getFirst(player).remove()
    level = level + 1
    addText("You Win!", { 
      x: 6,
      y: 1,
      color: color`6`
    })
  }
})

afterInput(() => {
  
})


addText("Press 'i' to Start", { 
  x: 1,
  y: 1,
  color: color`6`
})