/*
Fish game by kriptide.
#hackclub
*/

const player = "p"
const coralreef1 = "c"
const coralreef2 = "x"
const largefish1 = "f"
const largefish2 = "g"
const shrimp = "s"
const goal = "v"
const spikefish = "u"
const spikefish1 = "o"
const crate = "3"
const whale1 = "1"
const whale2 = "2"
const whale3 = "4"
const hook = "9"
const hookline = "0"
const trophy1 = "l"
const trophy2 = "b"
const trophy3 = "a"
const trophy4 = "i"

setLegend(
  [ player, bitmap`
................
................
................
.......00000....
......05555000..
.00..0577777770.
.050057777077050
.057777777770550
.050077077770550
.00..07707777050
......077770000.
.......00000....
................
................
................
................` ],
  [ hook, bitmap `
........0.......
........0.......
........0.......
........0.......
........0.......
........0.......
........0.......
.......0.0......
........0.......
........0.......
....00..0.......
...0....0.......
..0.....0.......
...0...0........
....000.........
................`],
  [ hookline, bitmap`
........0.......
........0.......
........0.......
........0.......
........0.......
........0.......
........0.......
........0.......
........0.......
........0.......
........0.......
........0.......
........0.......
........0.......
........0.......
........0.......`],
  [ coralreef1, bitmap`
................
................
................
....H....8......
....HH...8......
....H....8..8...
....HH..8....8..
....HH.88..88...
...H.8866888..6.
.HHHH8..6.88.66.
HHHHH.8866.866..
...HH..8888..6..
...H..8.666.66..
...HH8...6666..6
F666666FF666666F
6666F6666666F666` ],
  [ coralreef2, bitmap`
.......HH.......
....HHHHHH......
44....HHHHHH....
..444..D..HH....
..D4D.DD..HHH...
..44DD.D..HHHH3.
DD.4D.....H...3.
.DD.4.4...HH..3.
..DDD4...HH.H33.
...D.DDDHH.H333.
..44DD.HHH333333
..44D...H.3.3...
....D....H.3....
..66D.66..H.3...
66666F6666H..3.6
F666666666F66666`],
  [ crate, bitmap `
CCCCCCCCCCCCCCCC
CCF6666666666FCC
CFCF66666666FCFC
C6FCF666666FCF6C
C66FCF6666FCF66C
C666FCF66FCF666C
C6666FCFFCF6666C
C66666FCCF66666C
C66666FCCF66666C
C6666FCFFCF6666C
C666FCF66FCF666C
C66FCF6666FCF66C
C6FCF666666FCF6C
CFCF66666666FCFC
CCF6666666666FCC
CCCCCCCCCCCCCCCC`],
  [ largefish1, bitmap`
.00.............
.0.0...000000000
.6..000LLLLLLLLL
...0LLLLLLLLL1LL
..0LLLL1LL1LLL1L
.0LL0LLL1LL1LLL1
0LLLLLLLL1LL1LLL
0LLLLLLLLL1LL1LL
0LLLLLLLLL1LL1LL
.0LLLLLLLL1LL1LL
..0LLLLLLLLLL1LL
...0LLLLLLLLLLLL
....000LLLLLLLLL
.......000000000
................
................`],
  [ largefish2, bitmap`
................
................
00............00
LL000........000
LLLLL0......00L0
LLLLLL0000000L10
LLLLLL1LL1L0L1L0
LLLLLL1LL1LLLLL0
LLLLLLLLL1LLL1L0
LLLLLLLLLLLLLL10
LLLLLLLLLLLLL0L0
LLLLLLLLLLLL0.00
LLLLLLLLLLL0...0
00000000000.....
................
................`],
  [ shrimp, bitmap`
................
................
.......0000.....
......088880....
.....08888080...
....0888888800..
...088800000.0..
...0880.0.0...0.
...080..0..0..0.
...080...0......
...080..........
...080..00......
...0880080......
....088880......
.....00880......
.......00.......`],
  [ goal, bitmap`
................
..C.....C.......
.............C..
................
....C...........
................
................
.........C..C...
....C...........
................
................
.C............C.
....CC....C.....
.............C..
........C.......
....C...........`],
  [ spikefish, bitmap`
................
................
................
...........00000
...........05555
..........055555
.........0555555
.........0550555
.000000005555555
.........0555555
.........0555555
..........055555
...........05555
...........00000
................
................`],
  [ spikefish1, bitmap`
................
................
................
0.............00
50.........00050
5500......055550
555500...0555550
5555550005555550
5555555555555550
5555555555555550
5555550005555550
555550...0555550
55550.....055550
0000.......00050
..............00
................`],
  [ whale1, bitmap `
...0000000000000
..01111111111111
.011111111111111
.011111111111111
.011101111111111
.011111111111111
.011111111111111
.011111111111111
.011111111111111
..00000000000111
..0C0C0C0C0C0111
..0C0C0C0C0C0111
..00000000000111
.011111111111111
.011111111111111
..00000000000000`],
  [ whale2, bitmap`
0000000000000000
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
0000000000000000`],
  [ whale3, bitmap`
0...............
10..........00..
10........00110.
110......01111L0
110....00011LL10
110..00011LL1110
11000111LL11LLL0
111LLLLL111L1110
11111L11LLLLLLL0
1101111L111L1110
11000111LL11LLL0
110..00011LL1110
110....00011LLL0
10.......0111110
10........00110.
0...........00..`],
  [ trophy1, bitmap`
................
................
..........000000
......0000066666
......0666066666
......0600066666
......060.066666
......060.066666
......060.066666
......0600066666
......0666066666
......0000066666
..........066666
...........06666
............0666
.............066`],
  [ trophy2, bitmap`
................
................
000000..........
6666600000......
6666606660......
6666600060......
666660.060......
666660.060......
666660.060......
6666600060......
6666606660......
6666600000......
666660..........
66660...........
6660............
660.............`],
  [ trophy3, bitmap`
6666666666666666
6666666666666666
0666666666666660
.06666666666660.
..066666666660..
...0666666660...
....06666660....
.....066660.....
.....066660.....
.....066660.....
.....066660.....
.....066660.....
.....066660.....
..000066660000..
.06666666666660.
..000000000000..`],
  [ trophy4, bitmap`
................
................
0000000000000000
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666`],
  
)

setSolids([])

let level = 0
const levels = [
  map`
......s.
s......v
...s....
...fgs..
.s....s.
.......s
p..s.s..
xcccxcxx`,
  map`
vfg.s...
..s...s.
s.......
..ss.ss.
ss......
...s..fg
.p..s...
xxxcccxx`,
  map`
.......v
.fgs.uo.
.s..ss.s
.s......
...s...s
.fgs.s..
sp....ss
xccccccx`,
  map `
.s.uos..
s..s....
s....fg.
..sss...
s...s...
puo.cs.s
...x3v.c
xxx33xx3`,
  map `
........
s.12224.
...fg...
24.s.uo.
v..s....
3.s.....
331224.p
33cxcxxx`,
  map `
12240.v0
sfgs0.s0
....9..0
.ss..s.0
...s...0
33..3339
cs3xxxxp
3333333c`,
  map`
.1222240
..s..v.0
s...lib0
.....as9
..s.c3x.
...c333x
p.x33333
sx333333`,
]

setMap(levels[level])

setPushables({
  [ player ]: []
})

onInput("s", () => {
  getFirst(player).y += 1
})
onInput("w", () => {
  getFirst(player).y -= 1
})
onInput("a", () => {
  getFirst(player).x -= 1
})
onInput("d", () => {
  getFirst(player).x += 1
})
setSolids([ player, largefish1, largefish2, shrimp, spikefish, spikefish1, whale1, whale2, whale3, hook, hookline, trophy1, trophy2, trophy3, trophy4, crate ]);
afterInput(() => {
  const playerPosition = getFirst(player);

  const goalPosition = getFirst(goal);

  if (playerPosition.x === goalPosition.x && playerPosition.y === goalPosition.y) {
    level = level + 1;

    if (levels[level] !== undefined) {
      setMap(levels[level]);
    } else {
      addText("Fish won!", { y: 4, color: color`3` });
    }
  }
});