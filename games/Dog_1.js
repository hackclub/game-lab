/*
First time? Check out the tutorial game:
https://sprig.hackclub.com/gallery/getting_started

@title: Dog_1
@author: 
@tags: []
@addedOn: 2025-00-00
*/

const player = "p"
const dog = "d"
const background = "b"
const wall = "w"
const cobblestone = "c"
const ghar = "g"
const backgroundTune = tune`
434.7826086956522,
434.7826086956522: G4~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: A4~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: A4~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: B4~434.7826086956522,
434.7826086956522: A4~434.7826086956522,
434.7826086956522: A4~434.7826086956522 + G4~434.7826086956522 + F4~434.7826086956522,
434.7826086956522: F4~434.7826086956522,
434.7826086956522: F4~434.7826086956522 + G4~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: G4~434.7826086956522 + A4~434.7826086956522 + B4~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: B4~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: A4~434.7826086956522 + G4~434.7826086956522,
434.7826086956522: G4~434.7826086956522 + F4~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: F4~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: F4~434.7826086956522 + G4~434.7826086956522,
434.7826086956522: G4~434.7826086956522 + A4~434.7826086956522,
434.7826086956522: A4~434.7826086956522 + B4~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: C5~434.7826086956522 + D5~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: C5~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: B4~434.7826086956522,
434.7826086956522: B4~434.7826086956522 + A4~434.7826086956522 + G4~434.7826086956522 + F4~434.7826086956522,
434.7826086956522: F4~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: F4~434.7826086956522 + G4~434.7826086956522,
434.7826086956522: G4~434.7826086956522,
434.7826086956522: G4~434.7826086956522 + A4~434.7826086956522 + B4~434.7826086956522,
434.7826086956522: B4~434.7826086956522 + C5~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: C5~434.7826086956522 + B4~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: B4~434.7826086956522 + A4~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: A4~434.7826086956522,
434.7826086956522: A4~434.7826086956522 + F4^434.7826086956522,
434.7826086956522: A4~434.7826086956522 + D4^434.7826086956522,
434.7826086956522: G4~434.7826086956522 + D4^434.7826086956522`
const bark = tune`
157.89473684210526,
157.89473684210526: D5/157.89473684210526 + B4-157.89473684210526 + G4-157.89473684210526 + D4~157.89473684210526 + G5^157.89473684210526,
157.89473684210526: F5/157.89473684210526 + F4/157.89473684210526 + B4-157.89473684210526 + G4-157.89473684210526 + E4~157.89473684210526,
4578.9473684210525`
playTune(backgroundTune, Infinity)

setLegend(
  [ player, bitmap`
.......00.......
......0LC0......
.....0CCCL0.....
....00000000....
......0F60......
......066F0.0...
....0009690.0...
....0.0666000...
....0.0C3C0.....
......066F0.....
.....06F660.....
.....0F6F0......
......000.......
......0.0.......
.....00.00......
................` ],
  [ dog, bitmap`
................
................
....L..L.....20L
...L2LL2L...L0..
..L2C222L...12..
.82221222L..LL..
..LL2211L....0L.
....L12L.....LL.
...L22L......02.
...L222LLLLLLLL.
..L22L12L22110L.
.L22LLLLLLL..L2.
.L2.LL...LL..LL.
.LL.LL...L1..L1.
.L1.L1..........
................` ],
  [ background, bitmap`
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444` ],
  [ wall, bitmap`
................
.00000000000000.
.0LLLLLLLLLLLL0.
.0L1111111111L0.
.0L1222222221L0.
.0L1222222221L0.
.0L122LLLL221L0.
.0L122L00L221L0.
.0L122L00L221L0.
.0L122LLLL221L0.
.0L1222222221L0.
.0L1222222221L0.
.0L1111111111L0.
.0LLLLLLLLLLLL0.
.00000000000000.
................` ],
  [ cobblestone, bitmap`
................
.LLLLLLLLLL0LL0.
.L110111L10111L.
.LLLL1L11L1LL1L.
.L1L1LLLLLL111L.
.L1LL1LL11LLL0L.
.LL1LLL1LLLL11L.
.L1LLL1LLLLLL1L.
.111LLL1L11LL1L.
.LLLL1L11LL1L1L.
.L1L1LLLL1LLL1L.
.L1LLLLL1LLL11L.
.L111L1LL1L1L1L.
.0011011111111L.
.LLLLLLL0LLLL0L.
................` ],
  [ ghar, bitmap`
.......CC.......
......CLLC......
.....CLLLLC.....
....CLL11LLC....
...CLL1111LLC...
..CLL111111LLC..
...CCCCCCC1CC...
...CLCLCCCCCC...
...CCCC1CCCCC...
...CCCCCCC..C...
...FFFFCCC..C...
...C.CFCCCCCC...
...CCLFCCC1CC...
...CCCFCCCCCC...
...CCCFCCCCCC...
................` ],
)

setSolids([player, wall, cobblestone, dog])

let level = 0
const levels = [
  map`
p.w.c.....
..w.w...w.
..w.w.wcw.
..w.w.w.w.
.cw.c.w.w.
....w.c...
wwww.w.dc.
g.........`
]

setMap(levels[level])

setPushables({
  [ player ]: [cobblestone, dog]
})

onInput("s", () => {
  getFirst(player).y += 1
})
onInput("w", () => {
  getFirst(player).y -= 1
})
onInput("a", () => {
  getFirst(player).x -= 1
})
onInput("d", () => {
  getFirst(player).x += 1
})
onInput("j", () => {
  setMap(levels[level])
})

let previousDogCoordinates = {"x": getFirst(dog).x, "y": getFirst(dog).y }

addText("Press J to reset", {x:2, y:7 , color:color`9`})
afterInput(() => {
  clearText();
  if(tilesWith(dog, ghar).length >= 1){
    addText("You Won!", {x:7, y:7, color:color`9`})
  }
  let currentDogCoordinates = {"x": getFirst(dog).x, "y":getFirst(dog).y}
  if(currentDogCoordinates.x != previousDogCoordinates.x ||
     currentDogCoordinates.y != previousDogCoordinates.y){
    playTune(bark, 1)
    previousDogCoordinates = currentDogCoordinates
  }
})