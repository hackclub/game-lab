
/* 
yippee
*/

    const player = "p";
    const goal = "g";
    const wall = "w";
    const rords = "r";
    const and = "a";
    const gong = "o";
    const seek = "s";
    const find = "f";

const melody = tune`
500: F4^500,
500: C4^500,
500: F4^500,
500: C4^500,
500: F4^500,
500: C4^500,
500: C4^500,
500: C4^500,
500: F4^500,
500: C4^500,
500: F4^500,
500: C4^500,
500: F4^500,
500: C4^500,
500: C4^500,
500: C4^500,
500: F4^500,
500: C4^500,
500: F4^500,
500: C4^500,
500: F4^500,
500: C4^500,
500: C4^500,
500: C4^500,
500: F4^500,
500: C4^500,
500: F4^500,
500: C4^500,
500: F4^500,
500: C4^500,
500: C4^500,
500: C4^500`

const playback = playTune(melody, Infinity)


setLegend(
    [ player, bitmap`
................
................
...8HHH8HHH.....
....8H..8H......
....8H..8H......
...8HHHHHHH.....
..8HH20HH20H....
..8HH2CHH2CH....
..8HHHHHHHHH....
...8HHH00HH.....
....8H..8H......
....8HH.8HH.....
................
................
................
................`],
    [ wall, bitmap`
7555555555555555
7555555555555555
7555555555555555
7555555555555555
7555555555555555
7555555555555555
7555555555555555
7555555555555555
7555555555555555
7555555555555555
7555555555555555
7555555555555555
7555555555555555
7555555555555555
7555555555555555
7555555555555555`],
    [ goal, bitmap`
................
...DDD4DDD4.....
....D4..D4......
....D4..D4......
...DDDDDDD4.....
..D02DD02DD4....
..D52DD52DD4....
..DDDDDDDDD4....
...DD00DDD4.....
....D4..D4......
...DD4.DD4......
................
................
................
................
................`],
    [ rords, bitmap`
................
................
................
................
................
................
.5.5.555.55..555
.5.5..5..5.5.5..
.555..5..5.5.55.
.5.5..5..5.5.5..
.5.5.555.55..555
................
.555555555555555
................
................
................`],
    [ and, bitmap`
................
................
................
................
................
................
.....5..5..5.55.
....5.5.55.5.5.5
....555.5555.5.5
....5.5.5.55.5.5
....5.5.5..5.55.
................
....555555555555
................
................
................`],
    [ gong, bitmap`
................
................
................
................
................
................
....5555..55....
....5....5..5...
....5.55.5..5...
....5..5.5..5...
....5555..55....
................
....555555555...
................
................
................`],
    [ seek, bitmap`
................
................
................
................
................
................
555.555.555.5.5.
5...5...5...5.5.
555.55..555.55..
..5.5...5...5.5.
555.555.555.5.5.
................
555555555555555.
................
................
................`],
    [ find, bitmap`
555.555.5..5.55.
5....5..55.5.5.5
55...5..5555.5.5
5....5..5.55.5.5
5...555.5..5.55.
................
5555....5.......
..5.....5.......
5.5.555.555.555.
5.5.5.5.5.5.5.5.
555.555.5.5.5.5.
............3...
.............3..
.33333333333333.
.............3..
............3...`],
);

let level = 0
const levels = [
    map`
raos
....
pf.g`,
	map`
.w...w
pw.w.w
.w.w.w
.w.w.w
...w.g`,
    map`
p.....
wwwww.
......
.wwwww
.....g`,
    map`
pw........w......
.w.w.www..w.wwww.
.w.w.w.w..w....w.
.wwwww.ww.w.w..w.
.w......w.w.w..w.
.w.wwww...w.w..w.
.w.w..www.w.w.www
.w.w..w.w.w.w....
......w.w...wwww.
wwwwwww.ww.....w.
w..........wwwwwg`,
    map`
.........www..
.w.w.w.w.ww..w
.wwwwwww.....w
.......w.www.w
.wwwwwwwww...w
........gw.w..
wwwwwwwwww.w..
w..........ww.
wwww.wwwww.w..
p....w.....w..
wwww.w.www.www
...w.w...w.w..`,
    map`
..w.w.w.w..ww...
ww......ww....w.
...wwww.w.w.www.
.ww...w.www.w...
....w.w...w.w.w.
..www.www...w..w
ww....wpwwwwww..
...wwww.......wg
.ww...wwwwwww..w
....w..w.....w.w
wwwwww.w.w.w...w
.........w.wwwww
.wwwwwwwww......`,
    map`
...wwww........w...
.w......wwww.w..w..
..wwwwww....w.w..ww
..w......ww..w.w..w
.w..www.ww.w..w.w.w
.w.w....w...w.www.w
.w..w..w.w..w...w.w
.ww..ww...w..w..w.w
..ww....w.www...w.w
.w.wwwwww...w.w.w.w
..w...wgwww.w.w.w.w
w...w...wp..w.w...w`,
    map`
.w...w....ww.
...w...ww....
w.www..www..w
..wg.ww...w..
.www..w.w..w.
..w.w.w.w....
w...w.w.w.ww.
..w.w.w.w.w..
www.w...w.w..
p...wwwwww..w`,
    map`
w.......
w.wwwww.
w.w...w.
g.w.w.w.
www.w.w.
p...w...`,
    map`
ww.w...w.....w
..w..w..w..wgw
...w..w..w..w.
.w..w..w..w..w
..w..w..w..w.w
w..w..w..w.w.w
pw..w..w.w.w.w
..w..w...w.w.w
w....wwwww...w`,
    map`
pw...w...
.w.w.w.w.
.w.w.w.w.
.w.w.w.w.
.w.w.w.w.
...w...wg`,
    map`
..........g
.wwwwwwwwww
...........
wwwwwwwwww.
...........
.wwwwwwwwww
...........
wwwwwwwwww.
p..........`,
    map`
.....
p...g
.....`,
]

setSolids([ player, wall ]);

setMap(levels[level])

onInput("s", () => {
	getFirst(player).y += 1
})

onInput("w", () => {
	getFirst(player).y -= 1
})

onInput("d", () => {
	getFirst(player).x += 1
})

onInput("a", () => {
	getFirst(player).x -= 1
})

afterInput(() => {
    const goalsCovered = tilesWith(player, goal); 

    if (goalsCovered.length >= 1) {
        level = level + 1;

        if (level < levels.length) {
            setMap(levels[level]);
        } else {
            addText("Congrats! you win!", { y: 4, color: color`4` });
            playback.end()
        }
    }
});