/*
@title: black and white game
@author: liam
*/

const player = "p";
const final = "f";
const obstacle = "o";

setLegend(
  [ player, bitmap`
0000000000000000
0000000000000000
0000000000000000
0002200000022000
0022220000222200
0022220000222200
0002200000022000
0000000000000000
0000000000000000
0000000000000000
0000002222000000
0000002222000000
0000000000000000
0000000000000000
0000000000000000
0000000000000000`],
  [ final, bitmap`
0000000000000000
0222222222222220
0200000000000020
0202222222222020
0202000000002020
0202022222202020
0202020000202020
0202020220202020
0202020220202020
0202020000202020
0202022222202020
0202000000002020
0202222222222020
0200000000000020
0222222222222220
0000000000000000`],
   [ obstacle, bitmap`
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111
1111111111111111`]
);

setSolids([player, obstacle]);

let level = 0;
const levels = [
  map`
...o........
.p.o........
...o....oo..
.o.ooooooooo
.o..o......o
.o..o.ooo.oo
.o..o..o...o
.o.oo..o.f.o
........o.oo
...oooo..oo.
..oo..ooooo.
..o.........`,
];

setMap(levels[level]);

setPushables({
  [ player ]: [obstacle],
});

onInput("w", () => {
  getFirst(player).y -= 1
});

onInput("a", () => {
  getFirst(player).x -= 1
});

onInput("s", () => {
  getFirst(player).y += 1
});

onInput("d", () => {
  getFirst(player).x += 1
});


afterInput(() => {
  const tilesplayerandfinal=tilesWith(final, player);
  if (tilesplayerandfinal.length > 0) {addText("you winl!");

}
});