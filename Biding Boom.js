// A fun little game to be played with friends. Players take turns pressing the "s" key and hoping the bomb doesn't go boom on their turn
const player = "p";
const d1 = "H";
const d2 = "T";
const d3 = "C";
const d4 = "P";
const d5 = "L";
const d6 = "h";
const s = "E";
let gameStarted = false;


setLegend(
  [player, bitmap`
................
...000..0..00...
....0..0.0.0.0..
....0..000.00...
....0..0.0.0....
................
................
................
.......3333.....
......3.........
.......333......
..........3.....
......3333......
................
................
................`],
  [d1, bitmap`
...9666666669.6.
.99666336666666.
966633923633669.
6666392393223669
6339233239992366
6322932933399366
6639339992393666
6639399933936666
6322329923993666
6329933293922366
6633999332923669
9966329993933669
.96632299336669.
.96663293636666.
.669663366669.66
.69.96666669...6`],
  [d2, bitmap`
................
................
.......000......
......00.006...6
......0...00636.
.....000...0333.
...00LLL00..636.
..0L2LLLLL06...6
..02LLLLLL0.....
.0L2LLLLLLL0....
.0LLLLLLLLL0....
.0LLLLLLLL00....
..0LLLLLL00.....
..0LLLLL000.....
...0000000......
.....000........`],
  [d3, bitmap`
................
................
......000.......
.....00.006...6.
.....0...00636..
....000...0333..
..00LLL00..636..
.0L2LLLLL06...6.
.02LLLLLL0......
0L2LLLLLLL0.....
0LLLLLLLLL0.....
0LLLLLLLL00.....
.0LLLLLL00......
.0LLLLL000......
..0000000.......
....000.........`],
  [d4, bitmap`
................
.......000......
......00.006...6
......0...00636.
.....000...0333.
...00LLL00..636.
..0L2LLLLL06...6
..02LLLLLL0.....
.0L2LLLLLLL0....
.0LLLLLLLLL0....
.0LLLLLLLL00....
..0LLLLLL00.....
..0LLLLL000.....
...0000000......
.....000........
................`],
  [d5, bitmap`
.......000......
......00.006...6
......0...00636.
.....000...0333.
...00LLL00..636.
..0L2LLLLL06...6
..02LLLLLL0.....
.0L2LLLLLLL0....
.0LLLLLLLLL0....
.0LLLLLLLL00....
..0LLLLLL00.....
..0LLLLL000.....
...0000000......
.....000........
................
................`],
  [d6, bitmap`
................
......000.......
.....00.006...6.
.....0...00636..
....000...0333..
..00LLL00..636..
.0L2LLLLL06...6.
.02LLLLLL0......
0L2LLLLLLL0.....
0LLLLLLLLL0.....
0LLLLLLLL00.....
.0LLLLLL00......
.0LLLLL000......
..0000000.......
....000.........
................`],
  [s, bitmap`
.......000......
......00.006...6
......0...00636.
.....000...0333.
...00LLL00..636.
..0L2LLLLL06...6
..02LLLLLL0.....
.0L2LLLLLLL0....
.0LLLLLLLLL0....
.0LLLLLLLL00....
..0LLLLLL00.....
..0LLLLL000.....
...0000000......
.....000........
................
................`]
);

setSolids([]);
let level = 0;
const levels = [
  map`
.p
..`
];

setMap(levels[level]);
setPushables({
  [player]: []
});

onInput("s", () => {

    if (!gameStarted) {
    gameStarted = true;
    return;
  }
  
  const result = Math.random() < 0.143 ? d1 : Math.random() < 0.286 ? d2 : Math.random() < 0.429 ? d3 : Math.random() < 0.571 ? d4 : Math.random() < 0.714 ? d5 : Math.random() < 0.857 ? d6 : s;
  setMap(map`${result}`);
  const playerSprite = getFirst(player);
  if (playerSprite) {
    playerSprite.y += 1;
  }
  switch (result) {
    case d1:
      addText("You Died");
      addText("");
        gameStarted = false;
      break;
    case d2:
      addText("You Live");
      addText("");
      break;
    case d3:
      addText("You Live");
      addText("");
      break;
    case d4:
      addText("You Live");
      addText("");
      break;
    case d5:
      addText("You Live");
      addText("");
      break;
    case d6:
      addText("You Live");
      addText("");
      break;
  }
});

  onInput("d", () => {
  gameStarted = false;
  setMap(levels[level]);
});

